
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A modern FastAPI microservices boilerplate inspired by Laravel.">
      
      
        <meta name="author" content="gargashwani">
      
      
        <link rel="canonical" href="https://gargashwani.github.io/fastapi_boilerplate_documentation/FILE_STORAGE.html">
      
      
        <link rel="prev" href="BROADCASTING.html">
      
      
        <link rel="next" href="HTTP_CLIENT.html">
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>File Storage - FastAPI Laravel-Style Boilerplate</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#file-storage-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="FastAPI Laravel-Style Boilerplate" class="md-header__button md-logo" aria-label="FastAPI Laravel-Style Boilerplate" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FastAPI Laravel-Style Boilerplate
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              File Storage
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/gargashwani/fastapi_boilerplate" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="index.html" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="DEVELOPMENT.html" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="ARCHITECTURE.html" class="md-tabs__link">
          
  
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="CLI.html" class="md-tabs__link">
          
  
  
  Core Features

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="SECURITY.html" class="md-tabs__link">
        
  
  
    
  
  Security

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="artisan_commands.html" class="md-tabs__link">
        
  
  
    
  
  CLI Reference

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="API.html" class="md-tabs__link">
        
  
  
    
  
  API Reference

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="DEPLOYMENT.html" class="md-tabs__link">
        
  
  
    
  
  Deployment

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="CONTRIBUTING.html" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="SUPPORT.html" class="md-tabs__link">
        
  
  
    
  
  Support

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="LICENSE.html" class="md-tabs__link">
        
  
  
    
  
  License

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="FastAPI Laravel-Style Boilerplate" class="md-nav__button md-logo" aria-label="FastAPI Laravel-Style Boilerplate" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    FastAPI Laravel-Style Boilerplate
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gargashwani/fastapi_boilerplate" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DEVELOPMENT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorial_5min.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start (5 Min)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ENVIRONMENT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Environment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="REQUIREMENTS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Requirements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ARCHITECTURE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Core Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CLI.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Artisan CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="AUTHENTICATION.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DATABASE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Database
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="MODELS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CONTROLLERS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controllers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="SERVICES.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="SCHEMAS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schemas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="MIDDLEWARE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Middleware
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="REDIS_USAGE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis & Caching
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="TASK_SCHEDULING.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Scheduling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="BROADCASTING.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Broadcasting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    File Storage
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="FILE_STORAGE.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    File Storage
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduction
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Features
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Local Storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amazon-s3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Amazon S3
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftp" class="md-nav__link">
    <span class="md-ellipsis">
      
        FTP
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sftp" class="md-nav__link">
    <span class="md-ellipsis">
      
        SFTP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Import Storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Store Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieve-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Retrieve Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-file-existence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Check File Existence
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delete Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-file-url" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get File URL
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-drivers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Storage Drivers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Storage Drivers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#switching-drivers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Switching Drivers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-storage_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Local Storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amazon-s3_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Amazon S3
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftp_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        FTP
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sftp_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        SFTP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#putpath-content-overwritetrue" class="md-nav__link">
    <span class="md-ellipsis">
      
        put(path, content, overwrite=True)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getpath" class="md-nav__link">
    <span class="md-ellipsis">
      
        get(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#existspath" class="md-nav__link">
    <span class="md-ellipsis">
      
        exists(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletepath" class="md-nav__link">
    <span class="md-ellipsis">
      
        delete(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copyfrom_path-to_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        copy(from_path, to_path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#movefrom_path-to_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        move(from_path, to_path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sizepath" class="md-nav__link">
    <span class="md-ellipsis">
      
        size(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mime_typepath" class="md-nav__link">
    <span class="md-ellipsis">
      
        mime_type(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#last_modifiedpath" class="md-nav__link">
    <span class="md-ellipsis">
      
        last_modified(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filesdirectory" class="md-nav__link">
    <span class="md-ellipsis">
      
        files(directory='')
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directoriesdirectory" class="md-nav__link">
    <span class="md-ellipsis">
      
        directories(directory='')
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_directorypath" class="md-nav__link">
    <span class="md-ellipsis">
      
        make_directory(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete_directorypath" class="md-nav__link">
    <span class="md-ellipsis">
      
        delete_directory(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#urlpath" class="md-nav__link">
    <span class="md-ellipsis">
      
        url(path)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-file-upload" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 1: File Upload
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-file-download" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 2: File Download
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-3-image-processing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 3: Image Processing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-4-backup-to-s3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 4: Backup to S3
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-5-file-cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 5: File Cleanup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-6-directory-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 6: Directory Operations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Not Found
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permission-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Permission Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s3-connection-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        S3 Connection Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#large-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Large Files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Additional Resources
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="HTTP_CLIENT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="SECURITY.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="artisan_commands.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Reference
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="API.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="DEPLOYMENT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="CONTRIBUTING.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="SUPPORT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Support
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="LICENSE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduction
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Features
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Local Storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amazon-s3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Amazon S3
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftp" class="md-nav__link">
    <span class="md-ellipsis">
      
        FTP
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sftp" class="md-nav__link">
    <span class="md-ellipsis">
      
        SFTP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Import Storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Store Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieve-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Retrieve Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-file-existence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Check File Existence
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delete Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-file-url" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get File URL
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-drivers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Storage Drivers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Storage Drivers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#switching-drivers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Switching Drivers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-storage_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Local Storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amazon-s3_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Amazon S3
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftp_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        FTP
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sftp_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        SFTP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#putpath-content-overwritetrue" class="md-nav__link">
    <span class="md-ellipsis">
      
        put(path, content, overwrite=True)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getpath" class="md-nav__link">
    <span class="md-ellipsis">
      
        get(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#existspath" class="md-nav__link">
    <span class="md-ellipsis">
      
        exists(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletepath" class="md-nav__link">
    <span class="md-ellipsis">
      
        delete(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copyfrom_path-to_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        copy(from_path, to_path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#movefrom_path-to_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        move(from_path, to_path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sizepath" class="md-nav__link">
    <span class="md-ellipsis">
      
        size(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mime_typepath" class="md-nav__link">
    <span class="md-ellipsis">
      
        mime_type(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#last_modifiedpath" class="md-nav__link">
    <span class="md-ellipsis">
      
        last_modified(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filesdirectory" class="md-nav__link">
    <span class="md-ellipsis">
      
        files(directory='')
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directoriesdirectory" class="md-nav__link">
    <span class="md-ellipsis">
      
        directories(directory='')
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_directorypath" class="md-nav__link">
    <span class="md-ellipsis">
      
        make_directory(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete_directorypath" class="md-nav__link">
    <span class="md-ellipsis">
      
        delete_directory(path)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#urlpath" class="md-nav__link">
    <span class="md-ellipsis">
      
        url(path)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-file-upload" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 1: File Upload
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-file-download" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 2: File Download
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-3-image-processing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 3: Image Processing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-4-backup-to-s3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 4: Backup to S3
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-5-file-cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 5: File Cleanup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-6-directory-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 6: Directory Operations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Not Found
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permission-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Permission Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s3-connection-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        S3 Connection Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#large-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        Large Files
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Additional Resources
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="file-storage-guide">File Storage Guide</h1>
<p>This guide explains how to use the Laravel-like file storage system in this FastAPI boilerplate.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#storage-drivers">Storage Drivers</a></li>
<li><a href="#api-reference">API Reference</a></li>
<li><a href="#examples">Examples</a></li>
</ol>
<h2 id="introduction">Introduction</h2>
<p>The boilerplate provides a powerful filesystem abstraction similar to Laravel's Storage facade. It uses PyFilesystem2 under the hood, allowing you to work with local filesystems, Amazon S3, FTP, SFTP, and more using the same simple API.</p>
<h3 id="key-features">Key Features</h3>
<ul>
<li><strong>Unified API</strong>: Same methods work with all storage drivers</li>
<li><strong>Easy Switching</strong>: Change storage driver via configuration</li>
<li><strong>Laravel-like</strong>: Familiar API for Laravel developers</li>
<li><strong>Multiple Drivers</strong>: Local, S3, FTP, SFTP support</li>
</ul>
<h2 id="configuration">Configuration</h2>
<h3 id="environment-variables">Environment Variables</h3>
<p>Configure file storage in your <code>.env</code> file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># Default storage driver
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>FILESYSTEM_DISK=local  # Options: local, s3, ftp, sftp
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>FILESYSTEM_ROOT=storage/app  # Local storage root directory
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>FILESYSTEM_URL=  # Public URL for local storage (optional)
</code></pre></div>
<h3 id="local-storage">Local Storage</h3>
<p>Default driver for local file storage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>FILESYSTEM_DISK=local
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>FILESYSTEM_ROOT=storage/app
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>FILESYSTEM_URL=http://localhost:8000/storage
</code></pre></div>
<h3 id="amazon-s3">Amazon S3</h3>
<p>For cloud storage with Amazon S3:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>FILESYSTEM_DISK=s3
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>AWS_ACCESS_KEY_ID=your-access-key
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>AWS_SECRET_ACCESS_KEY=your-secret-key
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>AWS_DEFAULT_REGION=us-east-1
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>AWS_BUCKET=your-bucket-name
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>AWS_ENDPOINT=  # Optional: for S3-compatible services
</code></pre></div>
<h3 id="ftp">FTP</h3>
<p>For FTP server storage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>FILESYSTEM_DISK=ftp
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>FTP_HOST=ftp.example.com
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>FTP_PORT=21
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>FTP_USERNAME=your-username
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>FTP_PASSWORD=your-password
</code></pre></div>
<h3 id="sftp">SFTP</h3>
<p>For SFTP server storage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>FILESYSTEM_DISK=sftp
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>SFTP_HOST=sftp.example.com
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>SFTP_PORT=22
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>SFTP_USERNAME=your-username
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>SFTP_PASSWORD=your-password
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>SFTP_KEY=/path/to/private/key  # Optional: SSH key path
</code></pre></div>
<h2 id="basic-usage">Basic Usage</h2>
<h3 id="import-storage">Import Storage</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">app.core.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">storage</span>
</code></pre></div>
<h3 id="store-files">Store Files</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Store string content</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello, World!&#39;</span><span class="p">)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="c1"># Store bytes</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;file.bin&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;Binary content&#39;</span><span class="p">)</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="c1"># Store from file-like object</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;local_file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>    <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;remote_file.txt&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</code></pre></div>
<h3 id="retrieve-files">Retrieve Files</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Get file content as bytes</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">content</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="c1"># Convert to string</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="n">text</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">content</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div>
<h3 id="check-file-existence">Check File Existence</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">if</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">):</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File exists&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="delete-files">Delete Files</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
</code></pre></div>
<h3 id="get-file-url">Get File URL</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">url</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="c1"># Returns: http://localhost:8000/storage/file.txt (for local)</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c1"># Returns: https://bucket.s3.region.amazonaws.com/file.txt (for S3)</span>
</code></pre></div>
<h2 id="storage-drivers">Storage Drivers</h2>
<h3 id="switching-drivers">Switching Drivers</h3>
<p>You can use different storage drivers in the same application:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># Use default disk (from FILESYSTEM_DISK)</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="c1"># Use specific disk</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="n">storage</span><span class="p">(</span><span class="s1">&#39;s3&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="n">storage</span><span class="p">(</span><span class="s1">&#39;local&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
</code></pre></div>
<h3 id="local-storage_1">Local Storage</h3>
<p>Best for development and small applications:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># Files stored in storage/app directory</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="n">storage</span><span class="p">(</span><span class="s1">&#39;local&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;uploads/file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
</code></pre></div>
<h3 id="amazon-s3_1">Amazon S3</h3>
<p>Best for production and scalable applications:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># Files stored in S3 bucket</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">storage</span><span class="p">(</span><span class="s1">&#39;s3&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;uploads/file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Benefits:</strong>
- Scalable storage
- CDN integration
- High availability
- Pay-as-you-go pricing</p>
<h3 id="ftp_1">FTP</h3>
<p>For legacy systems or specific requirements:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1"># Files stored on FTP server</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">storage</span><span class="p">(</span><span class="s1">&#39;ftp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;uploads/file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
</code></pre></div>
<h3 id="sftp_1">SFTP</h3>
<p>For secure file transfers:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># Files stored on SFTP server</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">storage</span><span class="p">(</span><span class="s1">&#39;sftp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;uploads/file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="api-reference">API Reference</h2>
<h3 id="putpath-content-overwritetrue">put(path, content, overwrite=True)</h3>
<p>Store file content at given path.</p>
<p><strong>Parameters:</strong>
- <code>path</code> (str): File path
- <code>content</code> (str|bytes|BinaryIO): File content
- <code>overwrite</code> (bool): Whether to overwrite existing file</p>
<p><strong>Returns:</strong> <code>bool</code> - True if successful</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="getpath">get(path)</h3>
<p>Get file content.</p>
<p><strong>Parameters:</strong>
- <code>path</code> (str): File path</p>
<p><strong>Returns:</strong> <code>bytes|None</code> - File content or None if not found</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">content</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="existspath">exists(path)</h3>
<p>Check if file exists.</p>
<p><strong>Parameters:</strong>
- <code>path</code> (str): File path</p>
<p><strong>Returns:</strong> <code>bool</code> - True if file exists</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">if</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">):</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exists&quot;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="deletepath">delete(path)</h3>
<p>Delete file.</p>
<p><strong>Parameters:</strong>
- <code>path</code> (str): File path</p>
<p><strong>Returns:</strong> <code>bool</code> - True if deleted successfully</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="copyfrom_path-to_path">copy(from_path, to_path)</h3>
<p>Copy file from one location to another.</p>
<p><strong>Parameters:</strong>
- <code>from_path</code> (str): Source path
- <code>to_path</code> (str): Destination path</p>
<p><strong>Returns:</strong> <code>bool</code> - True if copied successfully</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s1">&#39;old/file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;new/file.txt&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="movefrom_path-to_path">move(from_path, to_path)</h3>
<p>Move file from one location to another.</p>
<p><strong>Parameters:</strong>
- <code>from_path</code> (str): Source path
- <code>to_path</code> (str): Destination path</p>
<p><strong>Returns:</strong> <code>bool</code> - True if moved successfully</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="s1">&#39;old/file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;new/file.txt&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="sizepath">size(path)</h3>
<p>Get file size in bytes.</p>
<p><strong>Parameters:</strong>
- <code>path</code> (str): File path</p>
<p><strong>Returns:</strong> <code>int|None</code> - File size or None if not found</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">size</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="mime_typepath">mime_type(path)</h3>
<p>Get file MIME type.</p>
<p><strong>Parameters:</strong>
- <code>path</code> (str): File path</p>
<p><strong>Returns:</strong> <code>str|None</code> - MIME type or None if not found</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="n">mime</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">mime_type</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="c1"># Returns: &#39;text/plain&#39;</span>
</code></pre></div></p>
<h3 id="last_modifiedpath">last_modified(path)</h3>
<p>Get file last modified timestamp.</p>
<p><strong>Parameters:</strong>
- <code>path</code> (str): File path</p>
<p><strong>Returns:</strong> <code>float|None</code> - Unix timestamp or None if not found</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">timestamp</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">last_modified</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="filesdirectory">files(directory='')</h3>
<p>Get list of files in directory.</p>
<p><strong>Parameters:</strong>
- <code>directory</code> (str): Directory path</p>
<p><strong>Returns:</strong> <code>List[str]</code> - List of file paths</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="n">files</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s1">&#39;uploads/&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="directoriesdirectory">directories(directory='')</h3>
<p>Get list of directories.</p>
<p><strong>Parameters:</strong>
- <code>directory</code> (str): Directory path</p>
<p><strong>Returns:</strong> <code>List[str]</code> - List of directory paths</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="n">dirs</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">directories</span><span class="p">(</span><span class="s1">&#39;uploads/&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="make_directorypath">make_directory(path)</h3>
<p>Create directory.</p>
<p><strong>Parameters:</strong>
- <code>path</code> (str): Directory path</p>
<p><strong>Returns:</strong> <code>bool</code> - True if created successfully</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">make_directory</span><span class="p">(</span><span class="s1">&#39;uploads/2024/&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="delete_directorypath">delete_directory(path)</h3>
<p>Delete directory and all contents.</p>
<p><strong>Parameters:</strong>
- <code>path</code> (str): Directory path</p>
<p><strong>Returns:</strong> <code>bool</code> - True if deleted successfully</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">delete_directory</span><span class="p">(</span><span class="s1">&#39;uploads/old/&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="urlpath">url(path)</h3>
<p>Get public URL for file.</p>
<p><strong>Parameters:</strong>
- <code>path</code> (str): File path</p>
<p><strong>Returns:</strong> <code>str|None</code> - File URL or None if not available</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="n">url</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;file.txt&#39;</span><span class="p">)</span>
</code></pre></div></p>
<h2 id="examples">Examples</h2>
<h3 id="example-1-file-upload">Example 1: File Upload</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">UploadFile</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">app.core.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">storage</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">upload_file</span><span class="p">(</span><span class="n">file</span><span class="p">:</span> <span class="n">UploadFile</span><span class="p">):</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>    <span class="c1"># Read file content</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>    <span class="n">content</span> <span class="o">=</span> <span class="k">await</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>    <span class="c1"># Generate unique filename</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>    <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;uploads/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>    <span class="c1"># Store file</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>    <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>    <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="n">path</span><span class="p">),</span>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>        <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">path</span><span class="p">),</span>
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>    <span class="p">}</span>
</code></pre></div>
<h3 id="example-2-file-download">Example 2: File Download</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.responses</span><span class="w"> </span><span class="kn">import</span> <span class="n">StreamingResponse</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">app.core.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">storage</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="k">def</span><span class="w"> </span><span class="nf">download_file</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>    <span class="n">content</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>    <span class="n">filename</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>    <span class="k">return</span> <span class="n">StreamingResponse</span><span class="p">(</span>
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a>        <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">content</span><span class="p">),</span>
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a>        <span class="n">media_type</span><span class="o">=</span><span class="s2">&quot;application/octet-stream&quot;</span><span class="p">,</span>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>        <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Content-Disposition&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;attachment; filename=</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a>    <span class="p">)</span>
</code></pre></div>
<h3 id="example-3-image-processing">Example 3: Image Processing</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">app.core.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">storage</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">io</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="k">def</span><span class="w"> </span><span class="nf">process_image</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>    <span class="c1"># Get image from storage</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>    <span class="n">content</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">content</span><span class="p">:</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>    <span class="c1"># Process image</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>    <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">content</span><span class="p">))</span>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>    <span class="n">image</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">((</span><span class="mi">800</span><span class="p">,</span> <span class="mi">800</span><span class="p">))</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>    <span class="c1"># Save processed image</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>    <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;JPEG&#39;</span><span class="p">)</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>    <span class="n">output</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>    <span class="c1"># Store processed image</span>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>    <span class="n">processed_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;processed/</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a>    <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">processed_path</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a>
<a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a>    <span class="k">return</span> <span class="n">processed_path</span>
</code></pre></div>
<h3 id="example-4-backup-to-s3">Example 4: Backup to S3</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">app.core.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">storage</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">backup_to_s3</span><span class="p">(</span><span class="n">local_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">s3_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>    <span class="c1"># Get file from local storage</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>    <span class="n">content</span> <span class="o">=</span> <span class="n">storage</span><span class="p">(</span><span class="s1">&#39;local&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">local_path</span><span class="p">)</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">content</span><span class="p">:</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>    <span class="c1"># Store in S3</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>    <span class="k">return</span> <span class="n">storage</span><span class="p">(</span><span class="s1">&#39;s3&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">s3_path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
</code></pre></div>
<h3 id="example-5-file-cleanup">Example 5: File Cleanup</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">app.core.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">storage</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="k">def</span><span class="w"> </span><span class="nf">cleanup_old_files</span><span class="p">(</span><span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">days</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">):</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete files older than specified days.&quot;&quot;&quot;</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>    <span class="n">cutoff</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">)</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>    <span class="n">files</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>    <span class="n">deleted</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a>    <span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a>        <span class="n">last_modified</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">last_modified</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>        <span class="k">if</span> <span class="n">last_modified</span><span class="p">:</span>
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a>            <span class="n">file_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">last_modified</span><span class="p">)</span>
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>            <span class="k">if</span> <span class="n">file_time</span> <span class="o">&lt;</span> <span class="n">cutoff</span><span class="p">:</span>
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>                <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>                <span class="n">deleted</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a>
<a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a>    <span class="k">return</span> <span class="n">deleted</span>
</code></pre></div>
<h3 id="example-6-directory-operations">Example 6: Directory Operations</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">app.core.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">storage</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="c1"># Create directory structure</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">make_directory</span><span class="p">(</span><span class="s1">&#39;uploads/2024/01/&#39;</span><span class="p">)</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">make_directory</span><span class="p">(</span><span class="s1">&#39;uploads/2024/02/&#39;</span><span class="p">)</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="c1"># List all files</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="n">all_files</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s1">&#39;uploads/&#39;</span><span class="p">)</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="c1"># List directories</span>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="n">directories</span> <span class="o">=</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">directories</span><span class="p">(</span><span class="s1">&#39;uploads/&#39;</span><span class="p">)</span>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="c1"># Delete entire directory</span>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">delete_directory</span><span class="p">(</span><span class="s1">&#39;uploads/old/&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="best-practices">Best Practices</h2>
<ol>
<li>
<p><strong>Use Unique Filenames</strong>: Generate unique filenames to avoid conflicts
   <div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">original_filename</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Organize by Structure</strong>: Use directory structure for organization
   <div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;uploads/</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">month</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Validate File Types</strong>: Always validate file types before storing
   <div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="n">ALLOWED_EXTENSIONS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;jpg&#39;</span><span class="p">,</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="s1">&#39;pdf&#39;</span><span class="p">}</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ALLOWED_EXTENSIONS</span><span class="p">:</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;File type not allowed&quot;</span><span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Handle Errors</strong>: Always check return values
   <div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="k">if</span> <span class="ow">not</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Failed to store file&quot;</span><span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Use Appropriate Driver</strong>: </p>
</li>
<li>Local for development</li>
<li>S3 for production</li>
<li>
<p>FTP/SFTP for specific requirements</p>
</li>
<li>
<p><strong>Clean Up</strong>: Regularly clean up old files
   <div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1"># Delete files older than 30 days</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="n">cleanup_old_files</span><span class="p">(</span><span class="s1">&#39;uploads/&#39;</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</code></pre></div></p>
</li>
</ol>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="file-not-found">File Not Found</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="k">if</span> <span class="ow">not</span> <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>    <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="permission-errors">Permission Errors</h3>
<p>Ensure storage directory has proper permissions:
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">755</span><span class="w"> </span>storage/
</code></pre></div></p>
<h3 id="s3-connection-issues">S3 Connection Issues</h3>
<ul>
<li>Verify AWS credentials</li>
<li>Check bucket permissions</li>
<li>Verify region settings</li>
</ul>
<h3 id="large-files">Large Files</h3>
<p>For large files, consider streaming:
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="c1"># For very large files, use chunked upload</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;large_file.bin&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>    <span class="n">storage</span><span class="p">()</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;large_file.bin&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</code></pre></div></p>
<h2 id="additional-resources">Additional Resources</h2>
<ul>
<li><a href="https://docs.pyfilesystem.org/">PyFilesystem2 Documentation</a></li>
<li><a href="https://docs.aws.amazon.com/s3/">AWS S3 Documentation</a></li>
<li><a href="https://fastapi.tiangolo.com/tutorial/request-files/">FastAPI File Uploads</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>